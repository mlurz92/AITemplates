# Anwendungsbeschreibung & Entwickler-Handbuch: Prompt-Templates Browser

## 1. Vision & Architektur-Philosophie

Der **Prompt-Templates Browser** ist eine **Progressive Web App (PWA)** als Single-Page-Anwendung (SPA) konzipiert, die ein latenzfreies, offline-fähiges Erlebnis für die hierarchische Verwaltung, Navigation und schnelle Kopie von Text-Prompts (Templates) bietet. Die Kernvision: Maximale Performance durch **Vanilla JavaScript** ohne Frameworks, minimale Bundle-Größe (<50KB) und GPU-beschleunigte Interaktionen für flüssige UX auf allen Devices. Die App simuliert ein natives Dateisystem mit Ordnern/Prompts, unterstützt Drag-and-Drop, Favoriten-Dock und Modals für Editieren/Kopieren. 

Architektur: Client-seitig, `localStorage`-basiert für Persistenz (JSON-Struktur als Single Source of Truth). Rendering dynamisch via DOM-Manipulation; Events throttled mit `requestAnimationFrame` (z. B. ticking-Variable für Scroll). PWA-Features: Manifest für Standalone-Modus, Service-Worker-fähig (nicht implementiert, erweiterbar). UI: "Layered Glassmorphism" mit Aurora-Hintergrund, Parallax-Scroll und View-Transitions-API für nahtlose Navigation. Code-Zuordnung: `script.js` (Zustand/Event-Handling, z. B. copyToClipboard mit node-Param für Feedback), `style.css` (Layout/Animationen, z. B. passive:false Touch-Optimierung), `index.html` (Shell + SVG-Templates via cloneNode(true)).

## 2. Getting Started (Lokale Entwicklung & Deployment)

1. **Repository klonen**: Lade alle Dateien (HTML, CSS, JS, JSON, SVG, Icons) herunter.
2. **Lokaler Server starten**: Öffne `index.html` via HTTP-Server (z. B. `npx serve` oder VS Code Live Server) für `localStorage`/`fetch`. Direkte `file://`-Öffnung funktioniert teilweise, aber Clipboard-API erfordert HTTPS (Fallback: execCommand mit fixed textarea -9999px).
3. **PWA-Installation**: Im Browser (Chrome/Edge) "Installieren" via Adressleiste; Manifest definiert Icons (192x192/512x512 PNG, maskable), Theme (#08080a), Standalone-Display.
4. **Testen**: 
   - Offline: Lade Templates via `templates.json`, bearbeite/speichere in `localStorage` (Priorität: Storage > Fetch).
   - Responsiv: DevTools (iPhone SE: Mobil-Grid <768px, flex-basis 100px; Desktop: Flex-Scroll 120px; iPad: Auto-Fit-Grid 768-1024px).
   - Tools: ESLint für JS (z. B. setTimeout-Params prüfen), CSS-Validator; simuliere Touch/Vibration (50ms) in DevTools; Test Copy-Feedback (1.5s Anim + 2s Tooltip/Aria-Reset).
5. **Deployment**: Hoste statisch (GitHub Pages/Netlify); erweitere mit Service-Worker für volles Offline-Caching (z. B. Cache templates.json).

## 3. Technologische Architektur & Kernkonzepte

### 3.1. Dateistruktur & Integration
- **`index.html`**: App-Shell mit `<header>` (Top-Bar: Back-Polyline-SVG, Breadcrumb-Flex, Add-Menü-Dropdown, Buttons mit ARIA), `<main id="cards-container">` (Grid-Rendering, max 36 Items), Modals (Prompt: textarea pre-wrap; Folder-Create: Input; Move: Tree-DOM), `#favorites-bar` (Container-Flex/Grid + Controls: Expand-Polyline-SVG), versteckte SVGs (`<defs>` für Icons: Folder-Path, Copy-Rect, Checkmark-Polyline etc., geklont via cloneNode(true) in renderView/renderFavoritesBar). Integration: Dynamische Inhalte via JS; ARIA-Labels dynamisch (z. B. aria-label "Kopiert: Titel" post-Copy, Reset nach 2000ms).
- **`style.css`**: Einheitliches Design (CSS-Variablen: `--bg-0` bis `--glass-noise`); responsives Grid (`auto-fit, minmax(120px,1fr)` für Karten); Glassmorphism (`backdrop-filter: blur(20px)` + Highlight/Shadow-Overlays + Noise-::after SVG-Turbulence + Border-::before Gradient mit exclude-Mask); Animationen (`@keyframes jiggle` rotate/translate, `copy-success-anim` scale 1→1.2 + box-shadow 0 0 10px --acc-2 bei 30%, `checkmark-pop` scale 0.7→1.1→1 bounce). Media-Queries: `@max-width:420px` (gap:0.6rem, Icons 20px, flex-basis:100px); Favoriten-Mask: linear-gradient transparent 0, black 10px, black calc(100%-40px), transparent 100%.
- **`script.js`**: Kernlogik (initApp: DOM-Query + Events; renderView: For-Loop DOM-Bau + Vivus-Setup; navigateToNode: History-Push + Transition). Externe Libs: Vivus (0.4.6 CDN, type:'delayed' duration:100 start:'manual' für Folder-SVGs), SortableJS (latest CDN, animation:200ms ghostClass:'sortable-ghost' Opacity 0.7 dashed). Keine Builds; ~2100 LOC, modular (z. B. handleDragEnter: springLoadTimeout setTimeout 800ms für Auto-Nav).
- **`templates.json`**: Seed-Daten (hierarchische JSON: Root {id:"root", type:'folder', items: Array mit UUID-IDs, nested folders/prompts {content:string}}). Geladen via `fetch` oder `localStorage` (Key: 'customTemplatesJson', fallback on Parse-Error: remove + Reload).
- **`manifest.json`**: PWA-Konfig (Name: "Prompt-Templates Browser"; short_name:"Prompts"; Icons purpose:"any maskable"; start_url:"index.html"; display:"standalone").
- **`favicon_animated.svg` / `favicon.svg`**: Logo (Glas-Rect rx:96 + Path-Falten stroke:#4a6bff + Lines + Circles; animiert via Vivus olvwKUSF_*-Classes stroke-dasharray/offset 1000ms ease-in-out).
- **Icons-Ordner**: PNGs für Manifest (192/512px, maskable für Adaptive Icons).
- **Zusammenspiel**: JS lädt JSON → rendert DOM (Karten: data-attrs + Clone-SVGs; Favoriten: For-Each mit aria-set + Touchstart passive:false); CSS handhabt Layout (z. B. .is-scrollable Mask) / Animationen (z. B. .copy-success 600ms ease-smooth); HTML definiert Struktur (z. B. #notification-area Flex-Column Gap 0.6rem).

### 3.2. Zustandsverwaltung & Datenpersistenz
- **Single Source of Truth**: `jsonData` (Objekt: {id:string, type:'folder'/'prompt', title:string, content:string/items:Array}). `currentNode` (aktueller Ordner-Referenz), `pathStack` (Array Nodes für History, pop/push in navigate*).
- **Persistenz**: `localStorage` ('customTemplatesJson': JSON.stringify(null,2); 'favoritePrompts': JSON.stringify(Array IDs)). Init: Try-Parse Storage → on Error: remove + Fetch fallback. Änderungen (Add: push to items; Edit: title/content-Set; Delete: splice index; Move: findParentOfNode rekursiv + splice/insert) via `persistJsonData()` (stringify + setItem + showNotification 'success' mit Checkmark-SVG clone).
- **Favoriten**: Flache Liste (`favoritePrompts` Array<string>); gerendert via `findNodeById` (rekursiv: if id-match return, else for items recurse). Toggle: indexOf + splice/push + saveFavorites (stringify) + re-render. Usage: Post-Copy aria-Update "Kopiert: title" + Timeout 2000ms Reset zu "Kopiere: title".
- **History**: `window.history` (pushState {path:Array IDs, modalOpen:bool, promptId:string}; replaceState on Init). `onpopstate`: State-Parse + Direction (length-Compare) + Modal-Handle (if modalOpen: Reopen via findNodeById + pathStack adjust).
- **Code-Zuordnung**: `loadJsonData/processJson` (Parse + Render-Init + History-Replace); `persistJsonData` (Save + Download/Reset-Visibility); `findNodeById/findParentOfNode` (Rekursion mit for-of items); `moveNode/combineIntoNewFolder` (find + splice/min-Index + push new {id:generateId(), items:[...]} + persist).

### 3.3. Rendering & Performance
- **Dynamisches Rendering**: `renderView(node)`: InnerHTML='' + For-Each childNodes.slice(0,36) (Create 'card' div + data-id/type/draggable=true + h3 textContent=title + contentWrapper; Folder: class 'folder-card' + clone svgTemplateFolder id=unique + vivusSetups.push; Prompt: class 'prompt-card' + btnContainer 'card-buttons' + clone Expand/Copy SVGs + aria-labels). Post: vivusSetups.forEach setup (if contains: new Vivus delayed 100ms manual + finish/opacity1); renderedCards.forEach add 'is-visible' (600ms translateY 20px→0 scale 0.98→1) + adjustCardTitleFontSize (while scrollHeight>clientHeight font-=0.5px min10 max16).
- **Favoriten-Dock**: `renderFavoritesBar()`: InnerHTML='' + collapse + if length=0 hidden/remove body-class; else remove hidden/add visible + aria-expanded=false + if innerWidth<768 add 'mobile-grid' class (für CSS-Grid-Trigger); For-Each: Create 'favorite-item' data-id/type + aria-label `Kopiere: ${title}` + iconWrapper (clone svgTemplateFavoriteCopy class 'icon-copy' + clone svgTemplateFavoriteCheckmark class 'icon-checkmark' absolute); span title ellipsis max120px; addEventListener click=copyToClipboard(content,item,node) + touchstart preventDefault passive:false (Präzision, no Zoom/Scroll); mouseenter=showTooltip(50ms delay) + mouseleave=hide. Timeout 0ms: scrollWidth>clientWidth → toggle 'is-scrollable' (Mask-Gradient) + controls show.
- **Performance-Optimierungen**: `requestAnimationFrame` (z. B. is-visible add, tooltip visible); Throttling (ticking=true/false für containerEl scroll → updateParallax translateY *0.3); GPU: will-change transform/opacity/filter in .card/.favorites-bar/.aurora-shape; Cache-frei (direkt jsonData-Zugriff, O(n) <50 Items); Fallbacks: !startViewTransition → direct callback; Vivus: reset/play/finish (mouseenter 60ms timeout opacity0→1; touchstart immediate opacity1).
- **View-Transitions**: `performViewTransition(callback, direction)`: Set dataset.pageTransitionDirection + startViewTransition(callback) + finished.finally delete dataset; CSS: ::view-transition-old/new(root) width/height 100% duration 0.35s ease-smooth; forward: slide-to-left/old + from-right/new; backward: slide-to-right/old + from-left/new; initial/other: fade-out/old + fade-in/new delay 0.1*duration.
- **Code-Zuordnung**: `renderView` (DOM-Loop + cloneNode(true) + Vivus-Params); `renderFavoritesBar` (For-Each + innerWidth-Check + aria-set + passive:false); `adjust*` (While-Loop Font, scrollHeight-Set); `performViewTransition` (API + CSS-Keys).

## 4. Visuelles Design: "Layered Glassmorphism" & UI/UX

### 4.1. Design-System
- **Farben/Themes**: Dunkel (hsl(228,12%,8%) Bg-0); Akzente: `--acc-1` #8b5cf6 (Lila), `--acc-2` #00e6ff (Cyan); Glass: `backdrop-filter: blur(20px) saturate(200%)` + radial --glass-highlight (150% at 30%10% white 0.3→0) / --glass-shadow-overlay (at 70%90% black 0.4→0) + ::after --glass-noise (SVG fractalNoise baseFreq 0.9 octaves3 opacity 0.25) + ::before --glass-border-gradient (130deg acc-2→1, padding1px mask-composite exclude opacity0.8→1 on Hover).
- **Typografie**: `--font-ui` (System-Sans: Inter/SF Pro/Segoe); Skalierbar: clamp(28px-40px FS-1, 18-22px FS-2, 14.5px FS-3); h3: weight600 line1.25 overflow-wrap break-word hyphens auto; Title-Ellipsis in .favorite-item-title max120px (Mobil 100px).
- **Spacing/Radius**: Gap: clamp(0.8-1.5rem) Karten/Dock; Radius: --radius-lg 20px Karten, 12px Menüs/Notifications, 999px Buttons; Shadows: --shadow-1 0 12px 32px rgba(0,0,0,.4), --vignette inset 0 0 80px 20px rgba(0,0,0,0.55); Padding: Top-Bar 0.6rem1.2rem, Karten clamp(0.8-1.2rem), Dock 0.75rem.
- **Animationen/Effekte**: GPU-freundlich (transform/opacity/filter, no reflow); `@keyframes grain` (Body::before translate -1%1% 7s steps10 infinite soft-light blend); `aurora-anim-1/2/3` (Shapes: translate/scale alternate 30-50s ease-in-out, vmax-radius blur100px plus-lighter 0.15 opacity); `jiggle` (Edit-Karten: rotate -0.5→0.5deg translateY 0→-1px 0.4s infinite); `copy-success-anim` (Icon: scale1→1.2 color current→acc-2 + box-shadow 0 0 10px acc-2 at 30%, 600ms ease-smooth); `checkmark-pop` (Scale 0.7→1.1→1 0.4s cubic-bezier 0.175 0.885 0.32 1.275 bounce); View-Transitions (Slide 35px translateX opacity0→1 0.35s ease-smooth); Hover-Lift (Karten: translateY-5px scale1.03 shadow+ border acc-2 0.26s ease-smooth); Modal-Scale (0.95→1 0.6s); Tooltip-Visibility (translateY10px→0 opacity0→0.95 0.2s); Notification-Show/Fade (translateY20px→0 opacity0→1→0 0.26s); Reduced-Motion: * animation/transition none !important.

### 4.2. UI/UX bei Viewports
- **Desktop (>1024px)**: Karten-Grid: 5-6 Spalten (minmax120px1fr gap1.5rem padding1.8rem); Top-Bar: Voll (min-height3.75rem, Breadcrumb nowrap overflow-auto no-scrollbar); Favoriten-Dock: Horizontales Flex (6-8 Items sichtbar, flex-basis/min-width120px gap0.6rem; Scroll-Snap mandatory + Mask-Gradient transparent0 black10px black calc(100%-40px) transparent100%); Expand: Auto-Fit-Grid (3-4 Spalten minmax140px1fr gap0.8rem vertikaler auto-Scroll padding-right1.5rem); Hover: Tooltips (200ch Snippet + strong title, positioned top/left collision-margin10px visibility-hidden→visible RAF); Klicks: Instant (Cursor pointer -webkit-tap-highlight transparent); Parallax: Stark (Aurora translateY *0.3).
- **Tablet (768-1024px)**: Karten: 3-4 Spalten (gap1.2rem padding1.5rem); Top-Bar: Kompakt (gap0.5rem); Dock: 4-6 Items (flex-basis120px, height42px font0.9rem); 'mobile-grid' nicht (innerWidth>=768); Expand: 2 Spalten Grid (minmax140px1fr, align-content flex-start); Touch/Hover-Mix: Präzise Klicks (passive:false verhindert Delay); Safe-Areas: Env() für Bottom-Padding (Dock/Modal).
- **Mobil (<768px, speziell <420px)**: Karten: 3 Spalten (gap0.6rem padding0.6rem top calc(5.5rem + safe-area)); Top-Bar: Min-height3.5rem (Icons20px); Fixed-Back: Left1.2rem top50% translateY-50% padding0.7rem (hidden at Home); Dock: 3-4 Items (flex-basis/min-width100px height38px gap0.4rem font0.85rem padding0 0.8rem0.6rem); innerWidth<768 → add 'mobile-grid' class (CSS-Trigger für erweiterte Responsivität); Expand: 1fr-Grid (vertikales Stack full-width, overflow-y auto padding-right1.5rem); Touch: Swipe-Back (touchstart/move/end passive true: diffX>50px && >|diffY| → class 'swiping-right' transform translateX min(diff-5,10vw) + history.back; feedbackThreshold5px); Copy: Vibration50ms + Animation; Kein Hover (mouseenter deaktiviert, touchstart passive false preventDefault no Zoom/Scroll-Issues); Aria-Updates für VoiceOver/TalkBack; Safe-Areas: Bottom calc(4.5rem + env) bei Visible, 12rem bei Expanded.
- **Low-Height (<500px, min-aspect1/1)**: Top-Bar min3.5rem; Fixed-Back left0.6rem padding0.45rem Icon20px; Cards padding-top calc(5rem + safe-area); Dock max-height4.5rem (Expand12rem adjust body padding-bottom).
- **Allgemein**: Env(safe-area-*) für iOS-Notch; Overscroll-y contain; Scrollbar thin rgba(255,255,255,0.15) hover acc-2 0.5; No-Overlap (z-index: Top-Bar999, Dock998, Context2000, Notification1100, Tooltip1001); Reduced-Motion deaktiviert (prefers-reduced-motion: reduce).

### 4.3. Interaktionen & Reaktionen
- **Navigation**: Ordner-Klick → navigateToNode (if !=current push pathStack + performViewTransition forward slide-from-right + renderView + updateBreadcrumb); Back-Button/Swipe (topbarBackBtn/fixedBackBtn/handleTouchEnd diffX>50px → if pathStack>0 navigateOneLevelUp pop + backward slide-from-left + history.pushState path.map id); Breadcrumb-Link-Klick → slice(0,index+1) + render + backward; Logo → navigateToHome (reset stack/node + backward).
- **Karten**: Prompt-Klick → openPromptModal (set data-id/value + updateFavoriteButton star-toggle + adjustHeight RAF + if mobile !popstate history.push {path, modalOpen true, promptId}); Folder-Klick → navigate; Button-Expand → Modal; Copy → copyPromptTextForCard (Clipboard + Success-Chain); Hover: Lift transformY-5px scale1.03 shadow+ border acc-2 z10 0.26s; Edit-Mode (Organize-Klick → toggleOrganizeMode add 'edit-mode' class → jiggle infinite + opacity1 scale1 Buttons absolute top-8px right-8px/24px: Delete red-hover scale1.15, Edit green-hover; Sortable init animation200ms); Drag: handleDragStart setData id effect move + setTimeout add 'dragging'; Over prevent dropEffect move; Enter: if folder add 'drop-target-folder' scale1.05 ring box-shadow 0 0 15px acc-2 0.24 + setTimeout 800ms navigate; else 'drop-target-combine' dashed bg acc-2 0.12; Drop: findNodes + if folder moveNode (findParent splice index + target.items push/splice newIndex + persist); else confirm + combineIntoNewFolder (min-index filter + new {id generateId type folder title'Neuer Ordner' items[ source target ]} + persist); End/Leave: clearTimeout + remove classes.
- **Favoriten-Dock**: Render bei Load/Toggle/Change (clear + if0 hidden; else visible + <768 add 'mobile-grid' + forEach: item data + aria `Kopiere: title` + wrapper clone Copy/Check absolute + span ellipsis + click copyToClipboard(content,item,node) + touchstart preventDefault passive false + mouseenter showTooltip 50ms delay content.substring0 200 + ... if>200 + position rect collision margin10 visibility hidden→visible RAF + mouseleave hide clearTimeout); Klick/Touch: copyToClipboard (if navigator.clipboard writeText then/catch; else textarea fixed top/left-9999px opacity0 focus select execCommand copy + remove); showSuccess: Notification + if item target.closest favorite or .icon-copy add 'copy-success' (600ms scale1→1.2 color acc-2 + glow shadow 0 0 10px acc-2 at30%) setTimeout1500ms remove + if node showTooltip(item,node) + setTimeout2000ms hide + if isMobile vibrate50ms + if favorite aria-set `Kopiert: ${node.title}` + setTimeout2000ms reset `Kopiere: ${node.title}`); Expand-Toggle: class 'is-expanded' + body 'favorites-bar-expanded' (padding-bottom adjust 4.5→12rem) + icon hidden-toggle + aria-expanded/label switch; Overflow: setTimeout0ms scrollWidth>clientWidth → 'is-scrollable' mask + controls show.
- **Modals**: openModal (remove hidden + RAF add visible backdrop blur0→16px); Close: remove visible + setTimeout300ms add hidden + if prompt reset data/height/display + if backdrop/mobile history.back + updateBreadcrumb; Prompt: toggleEditMode(isEditing) (class 'is-editing' readonly !is + buttons hidden-toggle + if new display block input + focus end selectRange length + adjustHeight scrollHeight); Save: if new title.trim check + new {id generate type prompt title content value} push items + persist + render + close; else findNode set content + persist + toggle false. Folder-Create: value='' + focus + saveNewFolder trim check + new {id generate type folder title items[]} push + persist + render + close. Move: data-itemId + renderFolderTree (innerHTML='' + recurse createTree: if folder div class tree-item data-folderId paddingLeft 0.8+level*1.5rem + clone folderIcon 20px + span title + if self/parent add disabled opacity0.5 no-hover + else click select class + confirm.disabled false); Confirm: data-itemId + selected data-folderId + moveNode + close.
- **Kontextmenü**: createContextMenu (global div + innerHTML items SVG+span data-action toggle-favorite/rename/move/delete + divider; click closest item → action dispatch: rename startRenamingCard input replace h3 focus select blur/enter finish (trim !=original set node.title + persist + if favorite re-render) + exit remove input display block adjustFont; delete handleDeleteClick confirm + style opacity0 scale0.8 transition0.3s + setTimeout300ms splice + if favorite filter + persist + render; move openMoveItemModal; favorite toggleStatus); showContextMenu (pageX/Y + type-filter hidden (favorite: no rename/move/delete divider1; folder/fav: hidden divider0 + text switch) + set data-id + add visible scale0.95→1 + position finalX/Y (if overflow flip left/top origin100%) + setTimeout0ms addEventListener click/contextmenu hide if !contains); hide remove visible.
- **Tooltip**: createGlobalTooltip (fixed div id); show (clearTimeout + setTimeout50ms: innerHTML strong title + textNode content0-200+... + measure offsetWidth/Height visibility hidden visible remove + position top=rect.top-height-10 left=rect.left+width/2-tooltipWidth/2 clamp margin10 + if top<10 bottom+10 + RAF add visible); hide clearTimeout + remove visible.
- **Notifications**: show (if timeout clear + existing remove; create div class notification type + if success clone checkmark class icon stroke acc-2 width19px; span message + append + RAF add show translateY0 opacity1 + setTimeout2800ms remove show add fade-out + transitionend once remove if parent); Position: fixed bottom calc(1.2rem+safe-area) left50% translateX-50% z1100 flex column gap0.6rem pointer-none; Adjust: favorites-visible bottom5rem, expanded12.5rem.
- **Sonstiges**: Escape handleKeyDown (if context visible hide; rename exit; expanded collapse; modals close); Fullscreen toggle (request/exit API + updateButton hidden-toggle + aria-label switch); Rename: input class rename-input border-bottom acc-2 2px transparent no + width100% center; Vivus: mouseenter if !touch play timeout60ms opacity0→1 reset play; touchstart immediate opacity1; leave/touchend finish opacity1; Download: localStorage get + Blob utf-8 + URL.createObjectURL + a href download 'templates_modified.json' click remove revoke; Reset: confirm + remove keys + notification + setTimeout1000ms location.reload.

## 5. Komponenten-Deep-Dive & Funktionszuordnung

### 5.1. Top-Bar & Navigation
- **Elemente**: Back (SVG polyline15-9-15 visibility hidden at home); Breadcrumb (span Home + > + spans titles class link/active cyan bold padding0.25em0.5em hover bg0.1 color acc-2; overflow-auto no-scrollbar flex-grow1 center min-width0); Add (btn + menu absolute top100%+8px right0 scale0.95 translateY-10px→1 0 opacity0→1 pointer-none flex column gap0.3rem width max-content; items flex gap0.7rem padding0.6rem1rem hover bg0.1 color acc-2); Organize (btn class toggle margin-left auto; SVG rect-grid→done polyline hidden-toggle on active); Download/Reset (ghost btns visible post-edit; icons path/polyline/line); Fullscreen (toggle SVG paths enter/exit hidden-switch support-check body data-fullscreen-supported); Logo (ghost btn img src animated.svg width30px hover scale1.05 rotate-3deg 0.26s).
- **Funktionen**: updateBreadcrumb (innerHTML='' + home span + for pathStack if title!=root separator > + link text (if current active else link click slice0 index+1 render backward history push path.map id)); navigateToHome (exitOrganize collapse if modal close + if stack>0 or !=jsonData transition backward reset stack/node render update + mobile history push [] false); navigateOneLevelUp (if stack>0 exit collapse transition pop current=parent render update + mobile history push path.map id false).
- **Code**: setupEventListeners (back click: if modal close backdrop else if stack up; fixed/logo home; add click stopProp toggle hidden; doc click if !add/menu add hidden; menu click action: add-prompt newModal/add-folder createModal + add hidden; download customJson; reset confirm remove keys notification timeout1000 reload; fullscreen click toggle + changes updateButton hidden/aria; expand toggleExpansion; modalClose close; copyModal click copyText; favorite click toggleStatus; edit toggle true; save saveChanges; modal click if target=== close backdrop; folderCancel close; save saveNew; tree click if target=== close; moveConfirm confirmMove; container click handleCard; context favoritesBar context; drag* container; input adjustHeight; keydown handle; scroll throttle updateParallax); handlePopState (exit + state parse + if modal&&!state close popstate; else if !modal&&state open promptId findNode pathStack map filter + if path end pop + current=last/stack0 + open true; else navigationFromState targetLength + updateDOM pathStack=map filter if !=length [] else0 jsonData + render update + transition direction).

### 5.2. Karten-System (`.card`)
- **Typen**: Folder (class folder-card contentWrapper justify space-between align center + h3 margin0 + clone svgTemplateFolder id unique width clamp40-65% stroke fg-1→acc-2 hover; vivusSetup push parent/svgId); Prompt (class prompt-card contentWrapper space-between + h3 margin-bottom0.8em + btnContainer card-buttons flex space-evenly padding-top0.6em + btn ghost aria expand/copy clone SVGs width22px stroke current).
- **Edit-Mode**: toggleOrganizeMode (toggle 'edit-mode' + organize is-active + icons hidden + add display none; if editing Sortable container animation200 ghost 'sortable-ghost' bg acc-2 0.12 border2 dashed acc-2 opacity0.7 onEnd old/newIndex if != splice item + if from=to splice new + persist; else destroy null); Karten: cursor grab hover scale1.03 no jiggle + anim jiggle 0.4s infinite rotate-0.5→0.5deg translateY0→-1px; Buttons absolute top-8px (delete right-8px, edit right24px) bg bg-1 border glass opacity0 scale0.5→1 transition0.2s bounce/ease + hover scale1.15 bg*-hover (delete red24, edit green20); Icon stroke fg-2→color hover.
- **Drag-Drop**: handleDragStart (if edit && card prevent else; closest card dragSource + setData id effect move + setTimeout0 add dragging); Over (if edit prevent dropEffect move); Enter (prevent + closest card !=source clearTimeout + target=card type + if folder add drop-target-folder scale1.05 border2 solid acc-2 shadow 0 0 15px acc-2 0.24 + springLoadTimeout setTimeout800ms findId navigate; else add drop-target-combine border2 dashed acc-2 bg acc-2 0.12); Leave (closest card clearTimeout remove classes + if target= null); Drop (prevent clearTimeout + dropped closest !=source + sourceId getData + sourceNode find + if dropped targetId + targetNode find + if folder moveNode (findParent sourceIndex splice1 + target items? [] push/splice newIndex sourceNode + persist render); else confirm + combine (parent find + source/targetIndex filter !=ids + minIndex splice0 newFolder {id generate type folder title'Neuer' items[source target]} + persist render)); End (clear + remove dragging/classes all querySelectorAll); sortable-drag class on drag: grabbing opacity0.85 scale1.05 shadow1 z999 no anim.
- **Rendering**: renderView (exitOrganize + scrollTop save + innerHTML='' + if !node error p red center padding2rem; else items||[] slice0 36 + vivusSetups=[] rendered=[] + forEach child: create div card + id=child.id||generate set + data type draggable true + if deleteBtn create class card-delete aria delete action append clone svgTemplateDelete; + editBtn class card-edit aria edit action append clone svgTemplateEdit; + h3 text title||'Unbenannt' + contentWrapper class + append h3 + if folder class folder-card + if svgTemplateFolder clone id icon-folder-id append + push vivus {parent card svgId}; else class prompt-card + btnContainer class card-buttons + expandBtn btn ghost aria expand action append clone svgTemplateExpand; + copyBtn btn ghost aria copy action append clone svgTemplateCopy; + append btnContainer; + append contentWrapper card + append container + push rendered; + forEach vivus if body.contains new Vivus id delayed100 manual finish opacity1 + mouseenter !touch play timeout60 opacity0→1 reset play; touchstart touch=true play immediate opacity1; leave/touchend/cancel touch=false finish opacity1; + if rendered>0 scrollTop restore + RAF forEach add is-visible 600ms translateY20px→0 scale0.98→1 + adjustFont; else if items0&&innerHTML='' p center padding2rem opacity0.7 'Dieser Ordner ist leer.').
- **Interaktionen**: handleCardContainerClick (if modal/closest modal-content return; closest card else if target=container&&stack>0 up; button=closest data-action + if edit if button action=id: delete handleDelete (confirm + style opacity0 scale0.8 trans0.3s + timeout300 splice parent findIndex + if favorite filter save re-render persist render update); edit startRenaming (h3=query h3 original=text + input type text value class rename-input display none parent insertBefore focus select + blur/keydown enter finish trim!=original findId node.title=h3 text= persist if favorite re-render + exit remove input h3 display block adjust); return; id=data + node=find + if button stopProp action expand openModal node copy copyTextForCard node button; else if folder navigate else prompt openModal); Kontext: handleContextMenu (if modal/edit return; closest card/favorite-item prevent + show x pageY target).
- **Code**: handleCard* (Type-Check + Modal/Nav); startRenaming/exit (Input-Manip + Event blur/keydown + Persist); adjustCardTitle (While font loop 16→10 -0.5px).

### 5.3. Favoriten-Dock (`#favorites-bar`)
- **5.3.1. Rendering & Zustand**
  - renderFavoritesBar (innerHTML='' + collapseFavoritesBar if expanded toggle; if favoritePrompts.length===0 add hidden remove body favorites-bar-visible return; else remove hidden add visible body add + expandToggle aria-expanded false; if window.innerWidth<768 favoritesContainerEl.classList.add('mobile-grid') else remove (CSS-Trigger für erweiterte Grid-Responsivität); forEach promptId: node=findNodeById jsonData id if node&&type==='prompt' create div favorite-item data id type + setAttribute aria-label `Kopiere: ${node.title}`; div iconWrapper + clone svgTemplateFavoriteCopy class icon-copy absolute + clone svgTemplateFavoriteCheckmark class icon-checkmark stroke acc-2 scale0.7 opacity0; span class title text node.title ellipsis max-width120px (Mobil100px); append iconWrapper span item; item.addEventListener('click', () => copyToClipboard(node.content || '', item, node)); item.addEventListener('touchstart', e => e.preventDefault(), {passive: false}); item.addEventListener('mouseenter', e => showFavoriteTooltip(e.currentTarget, node)); item.addEventListener('mouseleave', () => hideFavoriteTooltip()); append favoritesContainerEl item; + setTimeout0ms: const isOverflowing = scrollWidth > clientWidth; favoritesControls.classList.toggle('hidden', !isOverflowing); favoritesContainerEl.classList.toggle('is-scrollable', isOverflowing) (Mask-Gradient + Controls-Visibility)).
- **5.3.2. Interaktionen & Feedback**
  - Klick/Touch: copyToClipboard(text, buttonElement=null, node=null) (const showSuccess=() => {showNotification('Prompt kopiert!','success'); if buttonElement const target=closest favorite-item or query .icon-copy if target add 'copy-success' (CSS-Anim 600ms scale1→1.2 color current→acc-2 + glow shadow 0 0 10px acc-2 at30%) setTimeout1500ms remove class; if node&&target showFavoriteTooltip(target,node) setTimeout2000ms hideFavoriteTooltip(); if 'vibrate'in navigator&&isMobile() navigator.vibrate(50); if buttonElement&&closest favorite-item const favoriteItem=closest if favoriteItem&&node favoriteItem.setAttribute('aria-label',`Kopiert: ${node.title}`) setTimeout2000ms setAttribute `Kopiere: ${node.title}`; }; const showError=err=>{console.error catch showNotification 'Fehler beim Kopieren' error;}; if navigator.clipboard&&isSecureContext writeText(text).then showSuccess catch showError; else {textarea create value=text style fixed top/left-9999px opacity0; body append focus select try execCommand 'copy' showSuccess catch showError; body remove;}); Hover: showFavoriteTooltip (clearTimeout tooltipTimeout + setTimeout50ms if !el return; innerHTML='' + strong class title text node.title + textNode content.substring0 200 + length>200 '...' ; append title content; rect=target.getBoundingClientRect margin=10; visibility hidden add visible offsetWidth/Height remove visible visibility ''; top=rect.top-height-margin left=rect.left+width/2-tooltipWidth/2 clamp if left<margin=margin if left+width>innerWidth-margin=innerWidth-width-margin if top<margin top=rect.bottom+margin; style top/left + RAF add visible); hide (clearTimeout + if el remove visible). Expand: toggleFavoritesBarExpansion (toggle 'is-expanded' + body toggle favorites-bar-expanded (Cards padding-bottom 4.5→12rem Notification bottom5→12.5rem); expandIcon=query .icon-expand collapse= .icon-collapse hidden-toggle; setAttribute aria-expanded isExpanded label switch 'einklappen'/'ausklappen'); collapseFavoritesBar (if is-expanded toggleExpansion).
- **Code**: loadFavorites (getItem parse try/catch []); saveFavorites (setItem stringify); toggleFavoriteStatus (indexOf >-1 splice show 'entfernt' info else push show 'hinzugefügt' success + save + updateFavoriteButton star hidden-toggle aria switch + renderFavoritesBar); Integration: findNodeById recurse für content; setupEventListeners add touchstart favoritesContainerEl preventDefault passive false (Präzision no Zoom/Scroll bei Klick); aria in render + update in showSuccess Timeout2000ms reset.

### 5.4. Modals & Overlays
- **Prompt-Modal**: openPromptModal(node, fromPopstate=false) (if node set data-id value=node.content updateFavoriteButton (modal visible&&data-id==promptId isFavorite=favoritePrompts.includes starOutline/Filled hidden-toggle aria switch); openModal (remove hidden + RAF RAF add visible backdrop blur0→16px); if mobile&&!fromPopstate&&node const state=history.state||{path:[],modalOpen:false} if !state.modalOpen const viewPath=pathStack.map id history.pushState {path:viewPath, modalOpen:true, promptId:node.id} '' href); toggleEditMode(isEditing) (fulltext class toggle is-editing readonly !is + editBtn hidden is + save hidden !is + copy/close/favorite hidden is + if data-mode=='new' titleInput display is&&new ?block:none; if isEditing if !new focus setSelectionRange length length; adjustHeight scrollHeight); savePromptChanges (mode=data-mode; if new title=trim if! show error focus return; new {id generate type prompt title content value} items?[] push + persist 'hinzugefügt' success render close; else id=data findNode content=value persist 'gespeichert' success toggle false); copyPromptText (copyToClipboard fulltext.value buttonElement||copyModalButton).
- **Folder-Create**: openCreateFolderModal (value='' openModal focus); saveNewFolder (title=trim if! show error focus return; new {id generate type folder title items[]} current items?[] push + persist 'Ordner hinzugefügt' success render close).
- **Move-Modal**: openMoveItemModal(itemId) (data-itemId renderFolderTree(itemId) openModal); renderFolderTree (innerHTML='' + function createTree(node,parentEl,level=0) {if type!='folder' return; div class tree-item data folderId style paddingLeft 0.8+level*1.5rem + clone folderIcon style width/height20px flexShrink0 + span text title + parent=findParent itemId if id==itemId||parent?.id add disabled opacity0.5 cursor not-allowed no hover bg; else click: selected=query .selected remove class add selected confirm.disabled=false; append parentEl; if items forEach child createTree child parentEl level+1; } createTree jsonData treeEl); confirmMoveItem (itemId=data target=query .selected data folderId if! return; moveNode itemId target close).
- **Kontextmenü**: createContextMenu (div class context + innerHTML div item data toggle-favorite svg star span Favorit + divider + item rename svg edit Umbenennen + item move svg move Verschieben... + divider + item delete svg delete Löschen; addEventListener click closest item action=elementId=data-id card=query card data-id; if rename startRenamingCard; delete handleDeleteClick id card; move openMoveItemModal id; toggle toggleFavoriteStatus id; hideContextMenu); showContextMenu(x,y,target) (id=data type=data.type||favorite if card/fav; isFavorite=includes id; query items: rename/move hidden type=='favorite'; delete hidden !(folder||prompt); dividers[1] hidden type favorite; if prompt/fav item remove hidden text=isFavorite?'Aus':'Zu' Favoriten; else add hidden; if folder/fav dividers[0] add hidden else remove; set data-id + add visible scale0.95→1; width/height measure + window w/h + finalX=x if x+width>w x-width originX100%; finalY=y if y+height>h y-height originY100%; style left/top transformOrigin originX originY + setTimeout0ms addEventListener click/contextmenu true hide if !contains target); hideContextMenu (remove visible).
- **Tooltip**: createGlobalTooltip (div id favorite-tooltip body append); showFavoriteTooltip(target,node) (clearTimeout tooltipTimeout + setTimeout50ms if! return; innerHTML='' + strong class title text node.title + textNode content||''.substring(0,200)+(length>200?'...':''); append; rect=target rect margin=10; visibility hidden add visible offset w/h remove visible visibility ''; top=rect.top-height-margin left=rect.left+width/2-w/2; if left<margin left=margin; if left+w>innerWidth-margin left=innerWidth-w-margin; if top<margin top=rect.bottom+margin; style top/left + RAF add visible); hideFavoriteTooltip (clearTimeout + if el remove visible).
- **Notifications**: showNotification(msg,type='info') (if timeoutId clear + existing=query .notification remove; div class notification type + if success&&svgTemplateCheckmark clone class icon stroke-width3.2 width/height19px append + span text msg append; append area + RAF add show translateY0 opacity1; timeoutId=setTimeout2800ms remove show add fade-out translateY20px opacity0 + addEventListener transitionend once if parent===area remove timeoutId=null); Position fixed bottom calc(1.2+safe-bottom) left50% translateX-50% z1100 flex column align center gap0.6rem pointer-none trans bottom duration3 ease; Adjust body favorites-visible bottom5rem expanded12.5rem.
- **Code**: closeModal(elOrOpts={}) (el=modal or opts.nodeType1; fromPopstate=opts.fromPopstate fromBackdrop=opts.fromBackdrop; if !visible return; if el===modal&&fulltext is-editing toggle false; remove visible + setTimeout300ms add hidden + if el===modal remove data-id/mode title display none fulltext height auto; if el===modal if fromBackdrop if mobile&&state.modalOpen&&!fromPopstate history.back; updateBreadcrumb else if mobile&&!fromPopstate&&state.modalOpen history.back else updateBreadcrumb); openModal(el) (remove hidden + RAF RAF add visible); adjustTextareaHeight(el) (if! height auto height scrollHeight px).

### 5.5. Sonstige Komponenten
- **Aurora-Hintergrund**: Fixed #aurora-container z-1 pointer-none will-change transform + shapes absolute radius50% blend plus-lighter opacity0.15 blur100px (shape1 60vmax #acc-1 top/left-20vmax anim1 translate/scale 30s alt; shape2 50vmax #acc-2 top10 right-15 anim2 40s; shape3 40vmax #ffb86c bottom-10 left20 anim3 50s); Parallax updateParallax (factor0.3 style transform translateY lastScrollY*factor).
- **Vivus-Integration**: setupVivusAnimation(parent,svgId) (el=getElementById if!|| !folder-card return; instance=new Vivus svgId {type:'delayed',duration:100,start:'manual'} finish opacity1; timeoutId=null touchStarted=false; play(immediate=false) clearTimeout opacity immediate?1:0 + startVivus=() opacity1 instance reset play; if immediate start else timeoutId setTimeout60ms start; finish clearTimeout instance finish opacity1; addEventListener mouseenter !touchStarted play false; mouseleave !touchStarted finish; touchstart touchStarted=true play true passive true; touchend/cancel if touchStarted=false finish).
- **Mobile-Features**: setupMobileSpecificFeatures (body add mobile + container addEventListener touchstart handleStart passive true; touchmove handleMove passive true; touchend handleEnd passive true; history replaceState {path:[],modalOpen:false} '' href; window.onpopstate=handlePopState); handleTouchStart (if edit return; startX/Y=touches[0] clientX/Y end=start); handleTouchMove (if !startX||modal||edit return; endX/Y=touches[0]; diffX=endX-startX; if |diffX|>|diffY|&&diffX>5 add swiping-right style transform translateX min(diffX-5,innerWidth*0.1)px else remove class style ''); handleTouchEnd (if !startX||modal||edit return; diffX=end-startX diffY=endY-startY; remove class style ''; if |diffX|>|diffY|&&diffX>50 if stack>0 navigateHistory backward; start/end=0); navigateHistory(direction) (if mobile&&stack>0 history.back else if !mobile&&stack>0 exitOrganize transition if stack>0 pop current=parent render update direction).
- **Code**: isMobile (maxTouchPoints>0 || ontouchstart || /Mobi|Android/i ua); Integration: In events (z. B. copy if isMobile vibrate); History-Replace on processJson initial.

## 6. Wichtige Workflows: Von Interaktion zur Funktion

- **Favorit hinzufügen/kopieren**: Kontextmenü/Modal-Button → toggleFavoriteStatus (indexOf check splice/push + saveFavorites stringify + showNotification 'entfernt'/'hinzugefügt' + updateFavoriteButton if modal star hidden-toggle aria + renderFavoritesBar clear forEach build item aria Kopiere + events click copy touchstart prevent mouse* tooltip); Dock-Click/Touch → copyToClipboard (clipboard writeText or fallback textarea exec + showSuccess: notification + target add copy-success setTimeout1500 remove (CSS scale/glow 600ms) + if node showTooltip setTimeout2000 hide + if mobile vibrate50 + if favorite aria Kopiert setTimeout2000 reset Kopiere); Expand: Button-Klick → toggleExpansion class is-expanded body expanded (padding adjust) + icon hidden + aria switch; Swipe/Scroll: Snap x mandatory mask fade.
- **Ordner/Prompt bearbeiten**: Add-Button → menu toggle hidden (scale/translate opacity anim) + item click action add-prompt openNewPromptModal (data-mode new value='' display block open focus) / add-folder openCreateFolderModal value='' focus; New-Prompt Save: trim title check error focus else new id generate type prompt title content value push items persist hinzugefügt render close; Edit: Modal-Edit-Button → toggle true (is-editing readonly false buttons switch focus end); Save: mode!='new' id data findNode content=value persist gespeichert toggle false; Rename Kontext: startRenaming h3 hide input value original class rename border-bottom acc-2 focus select + blur/enter finish trim!= set node title h3 text persist if favorite render + exit remove display; Delete Kontext: handleDelete confirm style opacity0 scale0.8 trans0.3 + timeout300 parent findIndex splice + if favorite filter save render persist; Move Kontext: openMove data itemId renderTree recurse div padding level*1.5 + icon clone + span + if disabled opacity0.5 no cursor/hover else click select confirm enable; Confirm: itemId data target selected data moveNode (parent find sourceIndex splice + target items push/splice + persist render close).
- **Navigation**: Folder-Klick handleCard → navigateToNode (exitOrganize collapse if current!=node push stack + transition forward render update + if mobile !modal history push path.map id + current.id); Back/Swipe: topbarBack/fixed/handleTouchEnd diffX>50 → if modal close backdrop else if stack up (pop current=parent render update backward history push path.map id); Breadcrumb-Link: click slice0 index+1 current=nodeInPath render update backward history push path.map id; Logo: navigateToHome (exit collapse if modal close + if stack>0||!=jsonData transition backward reset stack/node render update + mobile history push [] false); Popstate: handlePopState (exit + state||{path:[],modalOpen:false} + currentlyModal=visible + direction length<stack backward else forward; if currently&&!state close fromPopstate; else if !currently&&state open promptId findNode pathStack=map filter + if path end&&last.id==promptId pop + current=last||jsonData open true; else handleNavigationFromState targetLength updateDOM pathStack=map filter if !=length&&path>0 [] else if0 [] current=target0?jsonData:last + render update transition direction).
- **Organisieren**: Organize-Klick → toggle (add/remove edit-mode + active icons + add none; if editing Sortable init onEnd splice old/new + persist else destroy); Drag: States (dragging opacity0.85 scale1.05 shadow z999; ghost bg acc-2 0.12 border dashed opacity0.7; target-folder scale1.05 border solid shadow ring; target-combine border dashed bg0.12); Drop: Logic (move splice push or combine confirm newFolder minIndex filter splice insert persist render); Jiggle: Infinite 0.4s rotate/translate on edit-mode cards.
- **Export/Reset**: Download-Klick → downloadCustomJson (getItem if! notification info return; Blob json utf-8 + URL create + a href download modified.json body append click remove revoke); Reset: confirm + remove custom/favorites + notification info + setTimeout1000 reload.
- **Code-Pfade**: Vollständig in script.js (z. B. Copy-Workflow: Item-Click → copyToClipboard text item node → if clipboard write then showSuccess (notification + add copy-success timeout1500 remove + showTooltip timeout2000 hide + vibrate if mobile + aria set timeout2000 reset) catch error; fallback textarea append focus select exec showSuccess;); Navigation: Klick → navigate push stack transition forward render; Back → pop transition backward history push.

## 7. Mobile-spezifische Verbesserungen & Workflows

- **Touch-Optimierungen**: setupMobileSpecificFeatures (body mobile + container touchstart/move/end passive true handle* (start X/Y=touches0 client; move endX/Y= + if !startX||modal||edit return diffX=end-startX if |diffX|>|diffY|&&>5 add swiping-right transform translateX min(diff-5,innerWidth0.1) else remove style; end remove class style if |diffX|>|diffY|&&>50 if stack>0 navigateHistory back start/end=0)); Favoriten: addEventListener touchstart e.preventDefault passive false (no Zoom/Scroll bei Klick, präzise Target); Vibration: In showSuccess if isMobile&&'vibrate'in navigator vibrate50ms (Haptik-Feedback on Copy).
- **History & Gesten**: replaceState {path:[],modalOpen:false} '' on init/processJson; push on navigate/modal (path map id + current.id if folder, modalOpen true promptId); popstate: Parse + if modalOpen diff close fromPopstate/back; else if !modal&&modalOpen reopen findNode pathStack adjust pop if end + open true; navigationFromState targetLength updateDOM pathStack=map filter (if !=length&&>0 [] else if0 [] current=target0 jsonData:last) render update transition direction (length<stack backward else forward); Swipe-Right: Visual swiping-right class trans none property + translateX feedback max10vw remove on end.
- **Layout-Anpassungen**: Env(safe-area-*) in top/left/right/bottom (Top-Bar fixed top safe-top, Dock bottom safe-bottom, Modals padding safe-*, Cards padding-top calc(6rem+safe-top) bottom6.5+safe-bottom adjust visible4.5 expanded12); <420px: Cards repeat3 1fr gap0.6rem padding0.6rem top5.5+safe; Dock height38px padding0 0.8 0 0.6 gap0.4rem font0.85 flex-basis100px Icons20px title max100px; Expand grid1fr full-stack; Low-Height min-aspect1/1 max500px: Top min3.5rem Cards top5+safe Fixed left0.6 padding0.45 Icon20px.
- **UX-Workflows**: Ein-Thumb (Back/Swipe instant, Add-Menü dropdown scale, Modal center 92% width max88vh overflow-y auto flex column); Long-Press-frei (touchstart preventDefault passive false in Favoriten/Events); Vibration + Aria-Update (VoiceOver: "Kopiert Titel" 2s) + Notification bottom adjust; Expand: Dedizierter verticaler Modus no horizontal scroll; Safe-Areas verhindern Notch-Overlaps (z. B. Dock bottom env).
- **Code**: isMobile (maxTouchPoints>0 || 'ontouchstart' || /Mobi|Android/i test ua try/catch); Integration: In copyToClipboard if isMobile vibrate; setupEvents add touchstart favoritesContainer prevent passive false; History-Replace on initial, push on nav/modal with modalOpen/promptId for popstate reopen logic.

## 8. Barrierefreiheit (Accessibility)

- **Semantik/ARIA**: <main/header/nav/button>; Buttons: aria-label dynamisch (z. B. Back "Zurück", Copy "Prompt kopieren" → post "Kopiert: Titel" Timeout2000ms reset, Expand "Details anzeigen", Favorite "Zu/Aus Favoriten" star-toggle); Toggle: aria-expanded false/true on Expansion/Fullscreen; Modals: Focus first input (titleInput.focus on open); Breadcrumb: spans role=link implicit; Tree-Items: aria-disabled on disabled (opacity0.5).
- **Keyboard/Focus**: :focus-visible outline none + box-shadow 0 0 0 3px acc-2 0.28 + 6px acc-1 0.18; Tab-Seq (Top-Bar → Cards → Modals trap); Escape global (handleKeyDown: context hide, rename exit, expanded collapse, modals close, tree close).
- **Screenreader**: Dynamik (aria-live implicit via updates, z. B. post-Copy "Kopiert Titel" für NVDA/TalkBack); Semantik SVGs (stroke current no title, aber aria-label on parent); Reduced-Motion: prefers-reduced-motion reduce * anim/trans none !important (deaktiviert jiggle/grain/aurora/view-transitions).
- **Kontrast/Skalierbarkeit**: WCAG-AA (Fg-1 95% on Bg-0 8%: Kontrast ~12:1; Accents >4.5:1); Clamp/Rem für 200% Zoom (kein Break); No-Overlays on Focus (z-index preserve); Hyphens auto overflow-wrap break-word in h3/textarea pre-wrap.
- **Code**: setupEventListeners (keydown Escape chain); updateFavorite/FullscreenButton (aria-label/set expanded); copyToClipboard (aria-set Timeout reset); openModal (focus first interactive).

## 9. Erweiterung, Wartung & Debugging

- **Erweiterung**: Service-Worker sw.js register in initApp für Cache templates.json/CSS/JS offline; Usage-Tracking localStorage 'favoriteUsage' {id,count,lastUsed} in copyToClipboard ++ save + sort in renderFavoritesBar (getUsage find count); Suche: Input in controls on expand input event filterFavorites display none !includes query toLowerCase title; Infinite-Scroll Cards >36 via IntersectionObserver. Vermeide DOM-Queries Loops (Cache refs WeakMap); Add Search in Breadcrumb.
- **Wartung**: Modularität: Funktionen isoliert (handle*-Serie Drag/Touch, copy*-Chain); Self-Explaining (z. B. params in Vivus/Sortable); Tests: Unit Jest (findNodeById recurse, copy fallback execCommand); E2E Puppeteer (Swipe diffX50 → back, Copy → clipboard assert, Vibration mock); Lint: ESLint no-unused-vars, Stylelint no-invalid-url.
- **Debugging**: Konsole: Errors (JSON.parse catch remove reload, fetch !ok throw HTTP status); Breakpoints: renderFavoritesBar (innerWidth check addClass), copyToClipboard (then/catch branch, setTimeout1500/2000), handleTouchEnd (diffX>50 navigate); Tools: Lighthouse PWA/Perf/A11y (Score 95%+), WebPageTest Load<1s CoreWebVitals green, Chrome Profiler (RAF throttle no Jank).
- **Bekannte Limits**: Max36 Karten/Render (O(n) DOM, erweiterbar Observer); Clipboard Secure-Context only (Fallback textarea works file:// aber no writeText); Vivus SVG-only (no fallback Canvas); localStorage Quota ~5MB (JSON max ~1000 Prompts); No Integrity CDN (Vivus/Sortable trust, erweiterbar).
- **Lizenz/Abhängigkeiten**: MIT; Externe: Vivus 0.4.6 https://cdnjs.cloudflare.com/ajax/libs/vivus/0.4.6/vivus.min.js (SVG-Anim), SortableJS latest https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js (Drag) – No integrity (Sicherheit: CDN-Trust, lokal hostbar).